e);const n=r.next();n?(await d.delay(n.delay),this.program===c&&t(n)):this.onProgramTerminated(e)})};return t(this.restarters.create(e.params.restart))}async getSimpleAttachPortIfAny(e){var t,r,n;if(e.attachSimplePort)return e.attachSimplePort;const i=e.runtimeExecutable;if(!i)return;if(!["npm","yarn","pnpm"].includes(o.basename(i,o.extname(i))))return;const a=e.runtimeArgs.find(e=>!e.startsWith("-")&&"run"!==e&&"run-script"!==e);if(!a)return;let s;try{s=JSON.parse(await c.readfile(o.resolve(e.cwd,"package.json")))}catch(e){return}return(null===(r=null===(t=s.scripts)||void 0===t?void 0:t[a])||void 0===r?void 0:r.includes("--inspect-brk"))?null!==(n=e.port)&&void 0!==n?n:9229:void 0}createLifecycle(e,t,{targetId:r}){return{initialized:async()=>{if(this.attachSimplePort&&await this.gatherTelemetryFromCdp(e,t),!t.params.stopOnEntry)return;const r=await(async e=>{if("string"==typeof e.stopOnEntry)return o.resolve(e.cwd,e.stopOnEntry);if(e.program)return o.resolve(e.cwd,e.program);for(const t of e.args){if(t.startsWith("-"))continue;const r=o.resolve(e.cwd,t);if(await c.exists(r))return r}})(t.params);if(!r)return void this.logger.warn("runtime","Could not resolve program entrypointfrom args");const n=p.absolutePathToFileUrl(r),i=p.urlToRe